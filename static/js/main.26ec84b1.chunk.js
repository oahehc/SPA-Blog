(window.webpackJsonpblog=window.webpackJsonpblog||[]).push([[0],{377:function(e,t,a){},378:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),o=a.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(18),l=a(13),i=a(61),u=a.n(i),p=a(3),m=a(4),d=a(6),h=a(5),b=a(7),f=a(2),E=a(17),v=function(){return r.a.createElement(f.b,{className:"main-logo",to:"/"},"For beginner",r.a.createElement("span",null,"React Learning"))},g=function(){return r.a.createElement("header",{className:"header"},r.a.createElement(v,null),r.a.createElement("p",{className:"header__description"},"\u6b64\u7ad9\u662f\u5b78\u7fd2 React \u7684\u7df4\u7fd2\u4f5c\u54c1\uff0c\u6587\u7ae0\u662f\u5e6b\u81ea\u5df1\u52a0\u5f37\u5370\u8c61\u7684\u5b78\u7fd2\u7b46\u8a18\uff0cHappy Coding !"))},O=function(){return r.a.createElement("p",null,"\ud83c\udf85\ud83e\uddd9\u200d\u2642\ufe0f\ud83e\udddb\ud83e\udddc\u200d\u2642\ufe0f\ud83e\uddde\u200d\u2640\ufe0f")},y=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={prevScrollPos:window.pageYOffset,isFixed:!1},a.handleScroll=function(){var e=a.state.prevScrollPos,t=window.pageYOffset,n=e>t&&t;a.setState({prevScrollPos:t,isFixed:n})},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this.state.isFixed;return r.a.createElement("nav",{className:"navbar ".concat(e?"fixed":"")},r.a.createElement("ul",{className:"navbar__list"},r.a.createElement("li",null,r.a.createElement(v,null)),r.a.createElement("li",null,r.a.createElement(f.c,{exact:!0,to:"/",activeClassName:"active"},"Home")),r.a.createElement("li",null,r.a.createElement(f.c,{to:"/posts",activeClassName:"active"},"List")),r.a.createElement("li",null,r.a.createElement(f.c,{to:"/about",activeClassName:"active"},"About")),r.a.createElement("li",null,r.a.createElement(f.c,{to:"/add-post",activeClassName:"active"},"AddPost"))))}}]),t}(n.Component),j=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.hideMsg;this.timer=setTimeout((function(){e()}),2e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=this.props.msg;return r.a.createElement("div",{className:"msg"},e.isSuccess?e[e.type].successMsg:e[e.type].errorMsg)}}]),t}(n.Component),_=function(e){var t=e.msg,a=e.hideMsg;return t.isActive&&r.a.createElement(j,{msg:t,hideMsg:a})},P=a(21);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S="HIDE_MSG",k="SHOW_MSG",D={isActive:!1,isSuccess:!1,type:"",addPost:{successMsg:"\u65b0\u589e\u6587\u7ae0\u6210\u529f",errorMsg:"\u65b0\u589e\u6587\u7ae0\u5931\u6557"},deletePost:{successMsg:"\u522a\u9664\u6587\u7ae0\u6210\u529f",errorMsg:"\u522a\u9664\u6587\u7ae0\u5931\u6557"},updatePost:{successMsg:"\u7de8\u8f2f\u6587\u7ae0\u6210\u529f",errorMsg:"\u7de8\u8f2f\u6587\u7ae0\u5931\u6557"}};var M=function(e,t){return{type:k,result:t,msgType:e}},L={hideMsg:function(){return{type:S}}},C=Object(l.b)((function(e){return{msg:e.msg}}),L)((function(e){return r.a.createElement(_,e)}));function A(e){return e?new Date(e).toDateString().substr(4,6):"who knows ?"}function T(e){return e?new Date(e).toDateString().substr(-4):"who knows ?"}var x=a(63),W=a.n(x),B=(a(84),function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement(W.a,{sizeUnit:"px",size:10,color:"#25d0fec2",loading:!0}))}),F=a(64),G=a.n(F),U=function(e){var t=e.item;return r.a.createElement("div",{className:"home-list__item-inner"},r.a.createElement("div",{className:"home-list__title"},r.a.createElement("span",null,A(t.createdAt)),r.a.createElement("h3",null,t.title)),r.a.createElement("p",{className:"home-list__description"}," ",t.body," "))},H=function(e){var t=e.src;return r.a.createElement("div",{className:"pic"},r.a.createElement(G.a,{src:t,loader:r.a.createElement(B,null)}))},I=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){(0,this.props.getLimitPosts)()}},{key:"render",value:function(){var e=this.props.postList;return r.a.createElement("div",{className:"home-list"},e.map((function(e,t){return r.a.createElement("section",{key:t,className:"home-list__item"},r.a.createElement(f.b,{to:"/posts/".concat(e.id)},r.a.createElement(H,{src:e.pic}),r.a.createElement(U,{item:e})))})))}}]),t}(n.Component),q=Object(E.e)(I),z=a(19),J=a.n(z);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Y="GET_ALL_POSTS",$="GET_LIMIT_POSTS",K="GET_POST",Q={postList:[],post:{}};var X="http://blog-api.yakim.tw/posts",Z=function(e){return{type:K,payload:J.a.get("".concat(X,"/").concat(e))}},ee={getLimitPosts:function(){return{type:$,payload:J.a.get("".concat(X,"?").concat("_sort=id&_order=asc","&").concat("_limit=5"))}}},te=Object(l.b)((function(e){return{postList:e.posts.postList}}),ee)((function(e){return r.a.createElement(q,e)})),ae=function(e){var t=e.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"submit",className:"add-post__submit btn-submit"},"Submit"),t&&r.a.createElement(f.b,{className:"btn-back",to:"/posts"},"Back"))},ne=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={author:"",title:"",body:""},a.handleChange=function(e){a.setState(Object(P.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.history,r=t.addPost,c=t.updatePost,o=t.showMsg;a.id?c(a.id,a.state,n,o):r(a.state,n,o)},a.id=a.props.match.params.id,a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){if(this.id){var e=this.props,t=e.getPost,a=e.post;t(this.id),this.setState(a)}}},{key:"render",value:function(){var e=this.state,t=e.author,a=e.title,n=e.body;return r.a.createElement("section",{className:"add-post"},r.a.createElement("h2",null,this.id?"\u7de8\u8f2f\u6587\u7ae0":"\u65b0\u589e\u6587\u7ae0"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("ul",null,r.a.createElement("li",{className:"add-post__author"},r.a.createElement("input",{type:"text",name:"author",defaultValue:t,onChange:this.handleChange,required:!0}),r.a.createElement("label",null,"\u6587\u7ae0\u4f5c\u8005")),r.a.createElement("li",{className:"add-post__title"},r.a.createElement("input",{type:"text",name:"title",defaultValue:a,onChange:this.handleChange,required:!0}),r.a.createElement("label",null,"\u6587\u7ae0\u6a19\u984c")),r.a.createElement("li",{className:"add-post__content"},r.a.createElement("label",null,"\u6587\u7ae0\u5167\u5bb9"),r.a.createElement("textarea",{className:"input-textarea",cols:"30",rows:"5",name:"body",onChange:this.handleChange,value:n,required:!0}))),r.a.createElement(ae,{id:this.id})))}}]),t}(n.Component),re={addPost:function(e,t,a){return{type:"ADD_POST",payload:J.a.post(X,e).then((function(){a("addPost",!0),t.push("/posts")})).catch((function(e){console.log(e),a("addPost",!1)}))}},getPost:Z,updatePost:function(e,t,a,n){return{type:"UPDATE_POST",payload:J.a.put("".concat(X,"/").concat(e),t).then((function(){n("updatePost",!0),a.push("/posts/".concat(e))})).catch((function(e){console.log(e),n("updatePost",!1)}))}},showMsg:M},ce=Object(l.b)((function(e){return{post:e.posts.post}}),re)((function(e){return r.a.createElement(ne,e)})),oe=function(e){var t=e.post;return r.a.createElement(f.b,{to:"/posts/".concat(t.id),className:"post"},r.a.createElement("p",{className:"post__date"},r.a.createElement("span",null,A(t.createdAt)),T(t.createdAt)),r.a.createElement("h4",{className:"post__title"},t.title),r.a.createElement("p",{className:"post__description"},t.body))},se=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){(0,this.props.getAllPosts)()}},{key:"render",value:function(){var e=this.props.postList;return r.a.createElement("div",{className:"post-list"},e.length?e.map((function(e){return r.a.createElement(oe,{post:e,key:e.id})})):r.a.createElement(B,null))}}]),t}(n.Component),le=Object(E.e)(se),ie={getAllPosts:function(){return{type:Y,payload:J.a.get("".concat(X,"?").concat("_sort=id&_order=desc"))}}},ue=Object(l.b)((function(e){return{postList:e.posts.postList}}),ie)((function(e){return r.a.createElement(le,e)})),pe=a(65),me=a.n(pe),de=a(383),he=a(382),be=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.language,a=e.value;return r.a.createElement(de.a,{language:t,style:he.a},a)}}]),t}(r.a.PureComponent);be.defaultProps={language:null};var fe=function(e){var t=e.post;return r.a.createElement("div",{className:"article__info"},r.a.createElement("p",{className:"article__author"},t.author),r.a.createElement("p",{className:"article__date"},A(t.createdAt)))},Ee=function(e){var t=e.post;return t.pic?r.a.createElement("div",{className:"pic article__cover"},r.a.createElement("img",{src:t.pic,alt:""})):null},ve=function(e){var t=e.post,a=e.handleDelete;return r.a.createElement("div",{className:"article__operate"},r.a.createElement(f.b,{className:"btn btn-back active",to:"/posts"},"Back"),r.a.createElement(f.b,{className:"btn btn-edit",to:"/edit-post/".concat(t.id)},"Edit"),r.a.createElement("button",{className:"btn btn-delete",onClick:a},"Delete"))},ge=function(e){var t=e.post;return r.a.createElement("div",{className:"article__body"},r.a.createElement(me.a,{source:t.body,renderers:{code:be}}))},Oe=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={isLoaded:!1},a.handleDelete=function(){var e=a.props,t=e.post,n=e.deletePost,r=e.history,c=e.showMsg;n(t.id,r,c)},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){(0,this.props.getPost)(this.props.match.params.id)}},{key:"componentDidUpdate",value:function(){this.state.isLoaded||this.setState({isLoaded:!0})}},{key:"render",value:function(){var e=this.props.post;return this.state.isLoaded?r.a.createElement("section",{className:"article"},r.a.createElement("h2",{className:"article__title"},e.title),r.a.createElement(Ee,this.props),r.a.createElement(ge,this.props),r.a.createElement(fe,this.props),r.a.createElement(ve,Object.assign({},this.props,{handleDelete:this.handleDelete}))):r.a.createElement(B,null)}}]),t}(n.Component),ye={getPost:Z,deletePost:function(e,t,a){return{type:"DELETE_POST",payload:J.a.delete("".concat(X,"/").concat(e)).then((function(){a("deletePost",!0),t.push("/posts")})).catch((function(e){console.log(e),a("deletePost",!1)}))}},showMsg:M},je=Object(l.b)((function(e){return{post:e.posts.post}}),ye)((function(e){return r.a.createElement(Oe,e)})),_e=(a(377),function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{basename:"/SPA-Blog"},r.a.createElement("div",{className:"wrapper"},r.a.createElement(y,null),r.a.createElement(g,null),r.a.createElement("main",{className:"container"},r.a.createElement(C,null),r.a.createElement(E.a,{path:"/",exact:!0,component:te}),r.a.createElement(E.a,{path:"/about",component:O}),r.a.createElement(E.a,{exact:!0,path:"/posts",component:ue}),r.a.createElement(E.a,{path:"/posts/:id",component:je}),r.a.createElement(E.a,{path:"/add-post",component:ce}),r.a.createElement(E.a,{path:"/edit-post/:id",component:ce}))))}}]),t}(n.Component)),Pe=Object(s.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:case $:return V({},e,{postList:t.payload.data});case K:return V({},e,{post:t.payload.data});default:return e}},msg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(console.log("call msg reducer"),t.type){case k:return N({},e,{isActive:!0,isSuccess:t.result,type:t.msgType});case S:return N({},e,{isActive:!1});default:return e}}}),we=a(68),Ne=a.n(we),Se=Object(s.a)(u.a,Ne.a)(s.d);o.a.render(r.a.createElement(l.a,{store:Se(Pe)},r.a.createElement(_e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},69:function(e,t,a){e.exports=a(378)},84:function(e,t,a){}},[[69,1,2]]]);
//# sourceMappingURL=main.26ec84b1.chunk.js.map